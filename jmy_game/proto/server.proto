syntax="proto3";

enum MsgIdTypeServer {
	MSGID_SERVER_NONE					= 0;
	MSGID_SERVER_ERROR					= 1;

	/* LoginServer <-> GateServer */
	MSGID_GT2LS_CONNECT_REQUEST				= 20000;
	MSGID_LS2GT_CONNECT_RESPONSE			= 20001;
	MSGID_LS2GT_SELECTED_SERVER_NOTIFY		= 20002;
	MSGID_GT2LS_SELECTED_SERVER_RESPONSE	= 20003;

	/* GateServer <-> ConfigServer */
	MSGID_GT2CS_CONNECT_REQUEST				= 20100;
	MSGID_CS2GT_CONNECT_RESPONSE			= 20101;

	/* LoginServer <-> ConfigServer */
	MSGID_LS2CS_CONNECT_REQUEST				= 20110;
	MSGID_CS2LS_CONNECT_RESPONSE			= 20111;

	/* GateServer <-> GameServer */
	MSGID_GS2GT_CONNECT_REQUEST				= 20200;
	MSGID_GT2GS_CONNECT_RESPONSE			= 20201;
}

// gate -> login  [MSGID_GT2LS_CONNECT_REQUEST]  gate connect login request
message MsgGT2LS_ConnectRequest {
	int32 gate_server_id = 1;
 	bytes gate_server_ip = 2;
	int32 gate_server_port = 3;
}

// login -> gate  [MSGID_LS2GT_CONNECT_RESPONSE]  response for gate connect login request
message MsgLS2GT_ConnectResponse {
}

// login -> gate  [MSGID_LS2GT_SELECTED_SERVER_NOTIFY]  selected server
message MsgLS2GT_SelectedServerNotify {
	bytes account = 1;
	//bytes session_code = 2;
}

// gate -> login  [MSGID_GT2LS_SELECTED_SERVER_RESPONSE]  response for selected server
message MsgGT2LS_SelectedServerResponse {
	bytes account = 1;
	bytes session_code = 2;
}

// gate -> config  [MSGID_GT2CS_CONNECT_REQUEST]  gate connect config request
message MsgGT2CS_ConnectRequest {
	int32 gate_id = 1;
	bytes gate_ip = 2;
	int32 gate_port = 3;
}

message MsgLoginInfoData {
	bytes login_ip = 1;
	int32 login_port = 2;
}

// config -> gate  [MSGID_CS2GT_CONNECT_RESPONSE]
message MsgCS2GT_ConnectResponse {
	repeated MsgLoginInfoData login_list = 1;
}

// login -> config  [MSGID_LS2CS_CONNECT_REQUEST]
message MsgLS2CS_ConnectRequest {
	int32 login_id = 1;
	bytes login_ip = 2;
	int32 login_port = 3;
}

message MsgGateInfoData {
	int32 gate_id = 1;
	bytes gate_ip = 2;
	int32 gate_port = 3;
	int32 platform = 4;
	int32 channel_code = 5;
}

// config -> login  [MSGID_CS2LS_CONNECT_RESPONSE]
message MsgCS2LS_ConnectResponse {
	repeated MsgGateInfoData gate_list = 1;
}
